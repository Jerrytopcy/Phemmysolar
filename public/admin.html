<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - PhemmySolar</title>
    <link rel="stylesheet" href="admin.css">
</head>
<body>
    <!-- Login Page -->
    <div class="login-container" id="loginContainer">
        <div class="login-box">
            <div class="login-header">
                <h1>PhemmySolar Admin</h1>
                <p>Login to manage your solar products</p>
            </div>
            <form class="login-form" id="loginForm">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" name="username" required>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <div class="error-message" id="errorMessage"></div>
                <button type="submit" class="btn btn-primary">Login</button>
            </form>
            <div class="login-footer">
                <p>Admin only: Secured by JerrytopcyCodes ü•∞üéâ</p>
                <a href="index.html">‚Üê Back to Website</a>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div class="dashboard-container" id="dashboardContainer" style="display: none;">
          <!-- Mobile Navigation Toggle -->
    <button class="mobile-nav-toggle" id="mobileNavToggle">
    <span class="hamburger-icon"></span>
    </button>
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>PhemmySolar</h2>
                <p>Admin Panel</p>
            </div>
            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" data-section="products">
                    <span class="nav-icon">üì¶</span>
                    <span>Products</span>
                </a>
                <a href="#" class="nav-item" data-section="orders">
                    <span class="nav-icon">üßæ</span>
                    <span>Orders</span>
                </a>
                <a href="#" class="nav-item" data-section="testimonials">
                    <span class="nav-icon">‚≠ê</span>
                    <span>Testimonials</span>
                </a>
                <a href="#" class="nav-item" data-section="news">
                    <span class="nav-icon">üì∞</span>
                    <span>News & Blog</span>
                </a>
                <!-- Add this inside the .sidebar-nav, after the "Settings" link -->
                <a href="#" class="nav-item" data-section="users">
                    <span class="nav-icon">üë§</span>
                    <span>Users</span>
                </a>
                <a href="#" class="nav-item" data-section="messages">
                    <span class="nav-icon">‚úâÔ∏è</span>
                    <span>Messages</span>
                </a>
                <a href="#" class="nav-item" data-section="settings">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span>Settings</span>
                </a>

            </nav>
            <div class="sidebar-footer">
                <a href="index.html" class="btn btn-secondary btn-sm" style="margin-bottom: 1rem; text-decoration: none;">‚Üê Back to Website</a>
                <button class="btn btn-logout" id="logoutBtn">Logout</button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="dashboard-header">
                <h1 id="pageTitle">Product Management</h1>
                <div class="user-info">
                    <span>Welcome, Admin</span>
                </div>
            </header>

            <!-- Products Section -->
            <section class="content-section" id="productsSection">
                <div class="section-actions">
                    <button class="btn btn-primary" id="addProductBtn">+ Add New Product</button>
                </div>

                <!-- Add/Edit Product Form -->
                <div class="product-form-container" id="productFormContainer" style="display: none;">
                    <div class="form-header">
                        <h2 id="formTitle">Add New Product</h2>
                        <button class="btn-close" id="closeFormBtn">√ó</button>
                    </div>
                    <form class="product-form" id="productForm">
                        <input type="hidden" id="productId">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="productName">Product Name *</label>
                                <input type="text" id="productName" required>
                            </div>
                            <div class="form-group">
                                <label for="productPrice">Price *</label>
                                <input type="text" id="productPrice" placeholder="‚Ç¶50,000" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="productCategory">Category *</label>
                            <select id="productCategory" required>
                                <option value="">Select a Category</option>
                                <option value="panels">Solar Panels</option>
                                <option value="batteries">Batteries</option>
                                <option value="inverters">Inverters</option>
                                <option value="controllers">Charge Controllers</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="productDescription">Description *</label>
                            <textarea id="productDescription" rows="4" required></textarea>
                        </div>
                        
                        <!-- Added multiple image upload support -->
                        <div class="form-group">
                            <label>Product Images * (Up to 5 images)</label>
                            <div class="image-upload-container">
                                <input type="file" id="imageInput" accept="image/*" multiple style="display: none;">
                                <button type="button" class="btn btn-secondary" id="selectImagesBtn">
                                    üìÅ Select Images from Device
                                </button>
                                <p class="upload-hint">Or enter image URLs below</p>
                            </div>
                            <div id="imagePreviewContainer" class="image-preview-container">
                                <!-- Image previews will appear here -->
                            </div>
                            <div id="imageUrlInputs" class="image-url-inputs">
                                <input type="text" class="image-url-input" placeholder="Image URL 1" data-index="0">
                                <input type="text" class="image-url-input" placeholder="Image URL 2 (optional)" data-index="1">
                                <input type="text" class="image-url-input" placeholder="Image URL 3 (optional)" data-index="2">
                                <input type="text" class="image-url-input" placeholder="Image URL 4 (optional)" data-index="3">
                                <input type="text" class="image-url-input" placeholder="Image URL 5 (optional)" data-index="4">
                            </div>
                        </div>
                        <!-- End of added multiple image upload support -->
                        
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Save Product</button>
                            <button type="button" class="btn btn-secondary" id="cancelFormBtn">Cancel</button>
                        </div>
                    </form>
                </div>

                <!-- Products Table -->
                <div class="products-table-container">
                    <table class="products-table">
                        <thead>
                            <tr>
                                <th>Image</th>
                                <th>Name</th>
                                <th>Price</th>
                                <th>Description</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="productsTableBody">
                            <!-- Products will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>
            <!-- Orders Section -->
            <section class="content-section" id="ordersSection" style="display: none;">
                <div class="section-header">
                    <h2>Order Management</h2>
                </div>
                <div class="order-filters">

                <input
                    type="text"
                    id="orderSearchInput"
                    placeholder="Search by Order ID or Customer"
                />

                <select id="statusFilter">
                    <option value="">All Status</option>
                    <option value="Pending">Pending</option>
                    <option value="Paid">Paid</option>
                    <option value="Processing">Processing</option>
                    <option value="Shipped">Shipped</option>
                    <option value="Delivered">Delivered</option>
                    <option value="Cancelled">Cancelled</option>
                </select>

                <select id="paymentFilter">
                    <option value="">All Payments</option>
                    <option value="Paid">Paid</option>
                    <option value="Unpaid">Unpaid</option>
                </select>

                </div>

                <div class="orders-table-container">
                    <table class="products-table">
                        <thead>
                            <tr>
                                <th>Order ID</th>
                                <th>Customer</th>
                                <th>Total</th>
                                <th>Status</th>
                                <th>Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="ordersTableBody">
                            <!-- Orders loaded by admin.js -->
                        </tbody>
                    </table>
                </div>
            </section>


            <!-- Testimonials Section -->
            <section class="content-section" id="testimonialsSection" style="display: none;">
                <div class="section-actions">
                    <button class="btn btn-primary" id="addTestimonialBtn">+ Add Testimonial</button>
                </div>

                <!-- Add/Edit Testimonial Form -->
                <div class="product-form-container" id="testimonialFormContainer" style="display: none;">
                    <div class="form-header">
                        <h2 id="testimonialFormTitle">Add Testimonial</h2>
                        <button class="btn-close" id="closeTestimonialFormBtn">√ó</button>
                    </div>
                    <form class="product-form" id="testimonialForm">
                        <input type="hidden" id="testimonialId">
                        <div class="form-group">
                            <label for="testimonialName">Customer Name *</label>
                            <input type="text" id="testimonialName" required>
                        </div>
                        <div class="form-group">
                            <label for="testimonialRole">Role/Title *</label>
                            <input type="text" id="testimonialRole" placeholder="e.g., Homeowner, Lagos" required>
                        </div>
                        <div class="form-group">
                            <label for="testimonialText">Testimonial Text *</label>
                            <textarea id="testimonialText" rows="4" required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="testimonialRating">Rating *</label>
                            <select id="testimonialRating" required>
                                <option value="5">5 Stars</option>
                                <option value="4">4 Stars</option>
                                <option value="3">3 Stars</option>
                            </select>
                        </div>
                        <!-- Updated testimonial form to support image uploads -->
                        <div class="form-group">
                            <label>Profile Image (Optional)</label>
                            <div class="image-upload-container">
                                <input type="file" id="testimonialImageInput" accept="image/*" style="display: none;">
                                <button type="button" class="btn btn-secondary" id="selectTestimonialImageBtn">
                                    üìÅ Select Image from Device
                                </button>
                                <p class="upload-hint">Or enter image URL below</p>
                            </div>
                            <div id="testimonialImagePreview" class="profile-image-preview"></div>
                            <input type="text" id="testimonialImageUrl" class="image-url-input" placeholder="Image URL (optional)">
                        </div>
                        <!-- End of updated testimonial form to support image uploads -->
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Save Testimonial</button>
                            <button type="button" class="btn btn-secondary" id="cancelTestimonialFormBtn">Cancel</button>
                        </div>
                    </form>
                </div>

                <!-- Testimonials Table -->
                <div class="products-table-container">
                    <table class="products-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Role</th>
                                <th>Testimonial</th>
                                <th>Rating</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="testimonialsTableBody">
                            <!-- Testimonials will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- News Section -->
            <section class="content-section" id="newsSection" style="display: none;">
                <div class="section-actions">
                    <button class="btn btn-primary" id="addNewsBtn">+ Add News Article</button>
                </div>

                <!-- Add/Edit News Form -->
                <div class="product-form-container" id="newsFormContainer" style="display: none;">
                    <div class="form-header">
                        <h2 id="newsFormTitle">Add News Article</h2>
                        <button class="btn-close" id="closeNewsFormBtn">√ó</button>
                    </div>
                    <form class="product-form" id="newsForm">
                        <input type="hidden" id="newsId">
                        <div class="form-group">
                            <label for="newsTitle">Article Title *</label>
                            <input type="text" id="newsTitle" required>
                        </div>
                        <div class="form-group">
                            <label for="newsDescription">Description (Short Summary) *</label>
                            <textarea id="newsDescription" rows="2" required></textarea>
                        </div>
                        <!-- Added full content field for complete article text -->
                        <div class="form-group">
                            <label for="newsContent">Full Article Content *</label>
                            <textarea id="newsContent" rows="5" required placeholder="Write your complete article here..."></textarea>
                        </div>
                        <!-- Added image upload support for news articles -->
                        <div class="form-group">
                            <label>Article Image (Optional)</label>
                            <div class="image-upload-container">
                                <input type="file" id="newsImageInput" accept="image/*" style="display: none;">
                                <button type="button" class="btn btn-secondary" id="selectNewsImageBtn">
                                    üìÅ Select Image from Device
                                </button>
                                <p class="upload-hint">Or enter image URL below</p>
                            </div>
                            <div id="newsImagePreview" class="testimonial-image-preview"></div>
                            <input type="text" id="newsImage" class="image-url-input" placeholder="Image URL (optional)">
                        </div>
                        <div class="form-group">
                            <label for="newsDate">Date *</label>
                            <input type="date" id="newsDate" required>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Save Article</button>
                            <button type="button" class="btn btn-secondary" id="cancelNewsFormBtn">Cancel</button>
                        </div>
                    </form>
                </div>

                <!-- News Table -->
                <div class="products-table-container">
                    <table class="products-table">
                        <thead>
                            <tr>
                                <th>Title</th>
                                <th>Date</th>
                                <th>Description</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="newsTableBody">
                            <!-- News articles will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Settings Section -->
            <section class="content-section" id="settingsSection" style="display: none;">
                <div class="settings-container">
                    <h2>Company Settings</h2>
                    <form class="settings-form">
                        <div class="form-group">
                            <label for="companyName">Company Name</label>
                            <input type="text" id="companyName" value="PhemmySolar Nigeria">
                        </div>
                        <div class="form-group">
                            <label for="companyPhone">Phone Number</label>
                            <input type="tel" id="companyPhone" value="+234 801 234 5678">
                        </div>
                        <div class="form-group">
                            <label for="companyEmail">Email Address</label>
                            <input type="email" id="companyEmail" value="info@phemmysolar.ng">
                        </div>
                        <div class="form-group">
                            <label for="companyWhatsapp">WhatsApp Number</label>
                            <input type="tel" id="companyWhatsapp" value="+234 801 234 5678">
                        </div>
                        <button type="submit" class="btn btn-primary">Save Settings</button>
                    </form>
                </div>
            </section>
         
            <!-- Add this after the settingsSection -->
            <section class="content-section" id="usersSection" style="display: none;">
                    <div class="section-actions">
                        <span class="warning">(Admin Only) Here admin view users and filters them</span>
                    </div>
                     <div class="order-filters">
                    <input type="text" id="userSearchInput" placeholder="Search by Username or Email" />
                    <select id="userRoleFilter">
                        <option value="">All Roles</option>
                        <option value="user">User</option>
                        <option value="admin">Admin</option>
                    </select>
                    <select id="userStatusFilter">
                        <option value="">All Statuses</option>
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                    </select>
                </div>
                <button id="exportCsvBtn" class="btn btn-primary">üì• Export CSV</button>
                    <div class="products-table-container">
                 
                        <table class="products-table">
                            <thead>
                                <tr>
                                    <th>Username</th>
                                    <th>Email</th>
                                    <th>Phone</th>
                                    <th>Address</th>
                                    <th>Order Count</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="usersTableBody">
                                <!-- Users will be loaded here -->
                            </tbody>
                        </table>
                        <div class="pagination-controls">
                            <button id="prevPageBtn" class="btn btn-secondary">‚Üê Previous</button>
                            <span id="pageInfo">Page 1 of 1</span>
                            <button id="nextPageBtn" class="btn btn-secondary">Next ‚Üí</button>
                        </div>
                    </div>
            </section>
            
            <!-- Messages Section -->
            <section class="content-section" id="messagesSection" style="display: none;">
                <div class="section-header">
                    <h2>Contact Messages</h2>
                    <p>View and manage messages from customers</p>
                </div>

                <!-- Filters -->
                <div class="order-filters">
                    <input type="text" id="messageSearchInput" placeholder="Search by Name, Email or Subject" />
                    <select id="messageStatusFilter">
                        <option value="">All Statuses</option>
                        <option value="unread">Unread</option>
                        <option value="read">Read</option>
                    </select>
                </div>

                <!-- Messages Table -->
                <div class="products-table-container">
                    <table class="products-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Subject</th>
                                <th>Date</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="messagesTableBody">
                            <!-- Messages will be loaded here -->
                        </tbody>
                    </table>
                     <div class="pagination-controls">
                            <button id="prevPageBtn" class="btn btn-secondary">‚Üê Previous</button>
                            <span id="pageInfo">Page 1 of 1</span>
                            <button id="nextPageBtn" class="btn btn-secondary">Next ‚Üí</button>
                        </div>
                </div>
            </section>
        </main>
    </div>
        <!-- Message Details Modal -->
        <div id="messageDetailsModal" class="modal-overlay" style="display: none;">
            <div class="modal-card">
                <div class="modal-header">
                    <h3>Message Details</h3>
                </div>
                <div id="messageDetailsContent" class="modal-content">
                    <!-- Content will be injected here by JavaScript -->
                </div>
            </div>
        </div>
    <!-- Custom Alert Modal -->
    <div class="admin-modal-overlay" id="adminAlertModal">
        <div class="admin-modal admin-modal-alert">
            <div class="admin-modal-icon admin-modal-icon-info">‚ÑπÔ∏è</div>
            <div class="admin-modal-content">
                <h3 class="admin-modal-title" id="adminAlertTitle">Alert</h3>
                <p class="admin-modal-message" id="adminAlertMessage"></p>
            </div>
            <div class="admin-modal-actions">
                <button class="btn btn-primary" id="adminAlertOkBtn">OK</button>
            </div>
        </div>
    </div>

    <!-- Custom Confirm Modal -->
    <div class="admin-modal-overlay" id="adminConfirmModal">
        <div class="admin-modal admin-modal-confirm">
            <div class="admin-modal-icon admin-modal-icon-warning">‚ö†Ô∏è</div>
            <div class="admin-modal-content">
                <h3 class="admin-modal-title" id="adminConfirmTitle">Confirm Action</h3>
                <p class="admin-modal-message" id="adminConfirmMessage"></p>
            </div>
            <div class="admin-modal-actions">
                <button class="btn btn-secondary" id="adminConfirmCancelBtn">Cancel</button>
                <button class="btn btn-primary" id="adminConfirmOkBtn">Confirm</button>
            </div>
        </div>
    </div>

    <div id="orderDetailsModal" class="Details-modal">
  <div class="admin-modal-content large">
    <!-- Printable Area -->
    <div id="orderPrintArea">
    <div class="modal-header branded-header">
    <div class="brand-box">
    <div class="brand-icon">‚òÄÔ∏èüîã‚ö°</div>
    <div class="brand-text">
      <h2>PhemmySolar</h2>
      <span>Solar Energy Solutions</span>
    </div>
    </div>

    <but class="modal-close" id="closeOrderDetailsBtn">√ó</button>
    </div>
      <h3>Order Details</h3>
      <!-- Order Meta -->
      <div class="order-meta">
        <div>
          <strong>Order ID:</strong> <span id="od-order-id"></span>
        </div>
        <div>
          <strong>Date:</strong> <span id="od-date"></span>
        </div>
        <div>
          <strong>Status:</strong>
          <span id="od-status" class="status-badge"></span>
        </div>
      </div>

      <!-- Customer -->
      <div class="order-section">
        <h3>Customer Information</h3>
        <p><strong>Name:</strong> <span id="od-name"></span></p>
        <p><strong>Email:</strong> <span id="od-email"></span></p>
        <p><strong>Phone:</strong> <span id="od-phone"></span></p>
        <p><strong>Delivery Address:</strong><br>
          <span id="od-address"></span>
        </p>
      </div>

      <!-- Items -->
      <div class="order-section">
        <h3>Order Items</h3>
        <table class="order-items-table">
          <thead>
            <tr>
              <th>Item</th>
              <th>Qty</th>
              <th>Price</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody id="od-items"></tbody>
        </table>
      </div>

      <!-- Summary -->
      <div class="order-summary">
        <div>
          <strong>Payment:</strong>
          <span id="od-payment"></span>
        </div>
        <div class="order-total">
          Total: <span id="od-total"></span>
        </div>
      </div>

    </div>

    <!-- Footer Actions -->
    <div class="modal-actions">
      <button id="printOrderBtn" class="btn-secondary">
        Print / Invoice
      </button>
      <button id="updateOrderStatusBtn" class="btn-primary">
        Update Status
      </button>
    </div>

  </div>
</div>

<!-- View User Modal -->
<div id="viewUserModal" class="modal-overlay" style="display: none;">
    <div class="modal-card">
        <div class="modal-header">
            <h3>User Details</h3>
            <button id="closeViewUserBtn" class="btn-close">&times;</button>
        </div>
        <div id="viewUserContent" class="modal-content">
            <!-- Content will be injected here -->
        </div>
        <div class="modal-actions">
            <button type="button" id="closeViewUserBtn2" class="btn btn-secondary">Close</button>
        </div>
    </div>
</div>

<div id="orderStatusModal" class="modal-overlay">
  <div class="modal-card">
    <h3>Update Order Status</h3>

    <select id="orderStatusSelect">
      <option value="Pending">Pending</option>
      <option value="Paid">Paid</option>
       <option value="Processing">Processing</option>
      <option value="Shipped">Shipped</option>
      <option value="Delivered">Delivered</option>
      <option value="Cancelled">Cancelled</option>
    </select>

    <div class="modal-actions">
      <button id="cancelStatusBtn" class="btn-outline">Cancel</button>
      <button id="confirmStatusBtn" class="btn-primary">Update</button>
    </div>
  </div>
</div>
<!-- Global Loading Overlay -->
<div id="globalLoader" class="loader-overlay">
    <div class="loader-spinner"></div>
    <p class="loader-text">Loading, please wait...</p>
</div>


    <script src="admin.js"></script>

</body>
</html>
